# è®¾è®¡æ¨¡å¼

> åˆšå­¦ä¹ ï¼Œä¸æ±‚ç”šè§£ï¼Œä½†æ±‚æœ‰ä¸ªå°è±¡

æ‰€æœ‰æ¨¡å¼æ ¹æ®æ„å›¾å’Œç›®çš„åˆ†ç±»ï¼š

1. åˆ›å»ºå‹æ¨¡å¼
2. ç»“æ„å‹æ¨¡å¼
3. è¡Œä¸ºæ¨¡å¼

ä¼˜ç§€è®¾è®¡çš„ç‰¹å¾ï¼š

1. ä»£ç å¤ç”¨æ€§é«˜ï¼šå‡å°‘å¼€å‘æˆæœ¬æ—¶æœ€å¸¸ç”¨çš„æ–¹å¼ä¹‹ä¸€

2. æ‰©å±•æ€§ï¼š**å˜åŒ–**æ˜¯ç¨‹åºå‘˜ç”Ÿå‘½ä¸­å”¯ä¸€ä¸å˜çš„äº‹æƒ…

   éœ€æ±‚ä¸æ–­å˜åŒ–çš„"å¥½çš„ä¸€é¢"ï¼šå¦‚æœæœ‰äººè¦æ±‚ä½ å¯¹ç¨‹åºè¿›è¡Œä¿®æ”¹ï¼Œè‡³å°‘è¯´æ˜è¿˜æœ‰äººå…³å¿ƒå®ƒã€‚

é€šç”¨è½¯ä»¶è®¾è®¡åŸåˆ™ï¼š

1. å°è£…å˜åŒ–çš„å†…å®¹ï¼šæ‰¾åˆ°ç¨‹åºä¸­çš„å˜åŒ–å†…å®¹å¹¶å°†å…¶ä¸ä¸å˜çš„å†…å®¹åŒºåˆ†å¼€ï¼Œä¸»è¦ç›®çš„æ˜¯å°†å˜æ›´é€ æˆçš„å½±å“æœ€å°åŒ–
2. æ–¹æ³•å±‚é¢çš„å°è£…
3. ç±»å±‚é¢çš„å°è£…

# SOLIDåŸåˆ™

## å•ä¸€èŒè´£åŸåˆ™

> ä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åªèƒ½æœ‰ä¸€ä¸ªã€‚

å°½é‡è®©æ¯ä¸ªç±»åªè´Ÿè´£è½¯ä»¶ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå¹¶å°†è¯¥åŠŸèƒ½å®Œå…¨å°è£…ï¼ˆä½ ä¹Ÿå¯ç§°ä¹‹ä¸ºéšè—ï¼‰åœ¨è¯¥ç±»ä¸­ï¼›

ä¸»è¦ç›®çš„ï¼šå‡å°‘å¤æ‚åº¦ã€‚

é”™è¯¯å®ç°ï¼š

```java
public class VideoUserService {

    public void serveGrade(String userType){
        if ("VIPç”¨æˆ·".equals(userType)){
            System.out.println("VIPç”¨æˆ·ï¼Œè§†é¢‘1080Pè“å…‰");
        } else if ("æ™®é€šç”¨æˆ·".equals(userType)){
            System.out.println("æ™®é€šç”¨æˆ·ï¼Œè§†é¢‘720Pè¶…æ¸…");
        } else if ("è®¿å®¢ç”¨æˆ·".equals(userType)){
            System.out.println("è®¿å®¢ç”¨æˆ·ï¼Œè§†é¢‘480Pé«˜æ¸…");
        }
    }
}
```

æ ¹æ®ä¸Šè¿°åŸåˆ™ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåŠŸèƒ½åšæˆå¯¹åº”çš„ç±»å¹¶è¿›è¡Œå°è£…ï¼›

![image-20220608220018785](https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220608220018785.png)

## å¼€é—­åŸåˆ™

> å¯¹äºæ‰©å±•ï¼Œç±»åº”è¯¥æ˜¯â€œå¼€æ”¾â€çš„ï¼›å¯¹äºä¿®æ”¹ï¼Œç±»åˆ™åº”æ˜¯â€œå°é—­â€çš„ã€‚

ä¸»è¦ç›®çš„ï¼šæ˜¯åœ¨å®ç°æ–°åŠŸèƒ½æ—¶èƒ½ä¿æŒå·²æœ‰ä»£ç ä¸å˜ï¼›

ä»¥æ±‚åœ†é¢ç§¯ä¸ºä¾‹ï¼Œå½“æ ‡å‡†ç±»ä¸­çš„å±æ€§å®šä¹‰ä¸æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç±»è¿›è¡Œæ‰©å±•ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸ºäº†ä¸å¯¹æºä»£ç çš„ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å®ç°æœ‰åˆ«äºçˆ¶ç±»çš„è¡Œä¸ºï¼›

<img src="https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220608223541143.png" alt="image-20220608223541143" style="zoom:50%;" />

ä¹Ÿæ¯”å¦‚åœ¨ä¸€ä¸ªè®¢å•ç±»ä¸­æœ‰è¿è¾“æ–¹æ³•ï¼Œå½“æˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„è¿è¾“æ–¹å¼çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªå¼€é—­åŸåˆ™ï¼Œå®ç°å­ç±»å®Œæˆéœ€æ±‚ï¼›

## é‡Œæ°æ›¿æ¢åŸåˆ™ï¼š

> å½“ä½ æ‰©å±•ä¸€ä¸ªç±»æ—¶ï¼Œ è®°ä½ä½ åº”è¯¥è¦èƒ½åœ¨ä¸ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹å°†å­ç±»çš„å¯¹è±¡ä½œä¸ºçˆ¶ç±»å¯¹è±¡è¿›è¡Œä¼ é€’ã€‚

å­ç±»å¿…é¡»ä¿æŒä¸çˆ¶ç±»è¡Œä¸ºçš„å…¼å®¹ã€‚åœ¨é‡å†™ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½ è¦å¯¹åŸºç±»è¡Œä¸ºè¿›è¡Œæ‰©å±•ï¼Œè€Œä¸æ˜¯å°†å…¶å®Œå…¨æ›¿æ¢;



å­ç±»ç»§æ‰¿çˆ¶ç±»éµå¾ªçš„åŸåˆ™ï¼š

- ä¸¤åŒâ€å³æ–¹æ³•åç›¸åŒã€å½¢å‚åˆ—è¡¨ç›¸åŒï¼›
- â€œä¸¤å°â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹åº”æ¯”çˆ¶ç±»æ–¹æ³•è¿”å›å€¼ç±»å‹æ›´å°æˆ–ç›¸ç­‰ï¼Œå­ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»åº”æ¯”çˆ¶ç±»æ–¹æ³•å£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ç±»æ›´å°æˆ–ç›¸ç­‰ï¼›
- â€œä¸€å¤§â€æŒ‡çš„æ˜¯å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™åº”æ¯”çˆ¶ç±»æ–¹æ³•çš„è®¿é—®æƒé™æ›´å¤§æˆ–ç›¸ç­‰ã€‚

## è¿ªç±³ç‰¹æ³•åˆ™åŸåˆ™ï¼š

æ„ä¹‰åœ¨äºé™ä½ç±»ä¹‹é—´çš„è€¦åˆã€‚ç”±äºæ¯ä¸ªå¯¹è±¡å°½é‡å‡å°‘å¯¹å…¶ä»–å¯¹è±¡çš„äº†è§£ï¼Œå› æ­¤ï¼Œå¾ˆå®¹æ˜“ä½¿å¾—ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œç›¸äº’é—´ä¸å­˜åœ¨(æˆ–å¾ˆå°‘æœ‰)ä¾èµ–å…³ç³»ã€‚

## æ¥å£éš”ç¦»æ€§ï¼š

> å®¢æˆ·ç«¯ä¸åº”è¢«å¼ºè¿«ä¾èµ–äºå…¶ä¸ä½¿ç”¨çš„æ–¹æ³•ã€‚

ä¸ªäººç†è§£å°±æ˜¯ï¼Œæˆ‘éœ€è¦ä»€ä¹ˆæ–¹æ³•ï¼Œå°±å®ç°ä»€ä¹ˆæ¥å£ã€‚å¯¹äºä¸éœ€è¦çš„æ–¹æ³•ï¼Œæ²¡æœ‰å¿…è¦å‡ºç°åœ¨ä»£ç ä¸­ã€‚

```java
public interface ISkill {

    /**
     * å°„ç®­
     */
    void doArchery();

    /**
     * éšè¢­
     */
    void doInvisible();

    /**
     * æ²‰é»˜
     */
    void doSilent();

    /**
     * çœ©æ™•
     */
    void doVertigo();

}
```

æ¥å£ä¸­å‡ºç°å¤šä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æˆ‘åœ¨å®ç°ä¸€ä¸ªè‹±é›„çš„æ—¶å€™ç”¨ä¸åˆ°è¿™ä¹ˆå¤šæ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå¤æ‚çš„æ¥å£æ‹†åˆ†ä¸ºä¸€ç»„é¢—ç²’åº¦æ›´å°çš„æ¥å£ï¼›

å°†æ¯ä¸ªæ–¹æ³•åšåˆ°æ¯ä¸ªå¯¹åº”çš„æ¥å£ä¸­ï¼Œè¿™æ ·åœ¨å®ç°ä¸€ä¸ªè‹±é›„çš„æ—¶å€™ï¼Œåªéœ€è¦æŒ‰ç…§å¯¹åº”æŠ€èƒ½å®ç°å¯¹åº”æ¥å£æ–¹æ³•æ¥å£ã€‚

```java
/**
å°„ç®­ã€éšè¢­ã€æ²‰é»˜
*/
public class HeroHouYi implements ISkillArchery, ISkillInvisible, ISkillSilent {

    @Override
    public void doArchery() {
        System.out.println("åè£”çš„ç¼æ—¥ä¹‹çŸ¢");
    }

    @Override
    public void doInvisible() {
        System.out.println("åè£”çš„éšèº«æŠ€èƒ½");
    }

    @Override
    public void doSilent() {
        System.out.println("åè£”çš„æ²‰é»˜æŠ€èƒ½");
    }

}
```

**æ³¨æ„ï¼š**

**ä½ å¯èƒ½ä¼šè¿‡åº¦ä½¿ç”¨è¿™æ¡åŸåˆ™ã€‚ä¸è¦è¿›ä¸€æ­¥åˆ’åˆ†å·²ç»éå¸¸å…·ä½“çš„æ¥å£ã€‚è®°ä½ï¼Œåˆ›å»ºçš„æ¥å£è¶Šå¤šï¼Œä»£ç å°±è¶Šå¤æ‚ã€‚å› æ­¤è¦ä¿æŒå¹³è¡¡ã€‚**

## ä¾èµ–å€’ç½®åŸåˆ™ï¼š

> é«˜å±‚æ¬¡çš„ç±»ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¬¡çš„ç±»ã€‚ ä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚æŠ½è±¡æ¥å£ä¸åº”ä¾èµ–äºå…·ä½“å®ç°ã€‚å…·ä½“å®ç°åº”è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚

ä¾‹å­ï¼šä¸šåŠ¡é€»è¾‘åº”è¯¥è°ƒç”¨å ä¸º openReport(file) çš„ æ–¹ æ³•ï¼Œ è€Œ ä¸ æ˜¯ openFile(x) ã€readBytes(n) å’Œ closeFile(x) ç­‰ä¸€ç³»åˆ—æ–¹æ³•ã€‚ è¿™äº›æ¥å£è¢«è§†ä¸ºæ˜¯é«˜å±‚æ¬¡çš„ï¼›

ç¼ºé™·ï¼šé«˜å±‚æ¬¡ç±»ä¾èµ–ä½å±‚æ¬¡ç±»ï¼Œå½“ä½å±‚æ¬¡ç±»å‘ç”Ÿæ”¹å˜(æ›´æ¢æ•°æ®åº“)ï¼Œä¼šå½±å“é«˜å±‚æ¬¡ç±»çš„ä½¿ç”¨

<img src="https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220613222424716.png" alt="image-20220613222424716" style="zoom:50%;" />

ä¿®æ”¹åï¼š

<img src="https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220613222525130.png" alt="image-20220613222525130" style="zoom:50%;" />

ä»¥æŠ½å¥–ä¸ºä¾‹ï¼šä¸å¾—ä¸è¯´ï¼Œå¦‚æœæ˜¯æˆ‘è‡ªå·±å†™ï¼Œç¡®å®ä¼šå†™æˆä¸‹é¢çš„ä»£ç ğŸ˜‚

```java
public class BetUser {

    private String userName;  // ç”¨æˆ·å§“å
    private int userWeight;   // ç”¨æˆ·æƒé‡   
}
package cn.bugstack.design;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

//è°ƒç”¨ç±»
public class DrawControl {

    // éšæœºæŠ½å–æŒ‡å®šæ•°é‡çš„ç”¨æˆ·ï¼Œä½œä¸ºä¸­å¥–ç”¨æˆ·
    public List<BetUser> doDrawRandom(List<BetUser> list, int count) {
        // é›†åˆæ•°é‡å¾ˆå°ç›´æ¥è¿”å›
        if (list.size() <= count) {
            return list;
        }
        // ä¹±åºé›†åˆ
        Collections.shuffle(list);
        // å–å‡ºæŒ‡å®šæ•°é‡çš„ä¸­å¥–ç”¨æˆ·
        List<BetUser> prizeList = new ArrayList<>(count);
        for (int i = 0; i < count; i++) {
            prizeList.add(list.get(i));
        }
        return prizeList;
    }

    // æƒé‡æ’åè·å–æŒ‡å®šæ•°é‡çš„ç”¨æˆ·ï¼Œä½œä¸ºä¸­å¥–ç”¨æˆ·
    public List<BetUser> doDrawWeight(List<BetUser> list, int count) {
        // æŒ‰ç…§æƒé‡æ’åº
        list.sort((o1, o2) -> {
            int e = o2.getUserWeight() - o1.getUserWeight();
            if (0 == e) {
                return 0;
            }
            return e > 0 ? 1 : -1;
        });
        // å–å‡ºæŒ‡å®šæ•°é‡çš„ä¸­å¥–ç”¨æˆ·
        List<BetUser> prizeList = new ArrayList<>(count);
        for (int i = 0; i < count; i++) {
            prizeList.add(list.get(i));
        }
        return prizeList;
    }

}
//æµ‹è¯•
public class ApiTest {

    private Logger logger = LoggerFactory.getLogger(ApiTest.class);

    @Test
    public void test_DrawControl(){
        List<BetUser> betUserList = new ArrayList<>();
        betUserList.add(new BetUser("èŠ±èŠ±", 65));
        betUserList.add(new BetUser("è±†è±†", 43));
        betUserList.add(new BetUser("å°ç™½", 72));
        betUserList.add(new BetUser("ç¬¨ç¬¨", 89));
        betUserList.add(new BetUser("ä¸‘è›‹", 10));

        DrawControl drawControl = new DrawControl();
        List<BetUser> prizeRandomUserList = drawControl.doDrawRandom(betUserList, 3);
        logger.info("éšæœºæŠ½å¥–ï¼Œä¸­å¥–ç”¨æˆ·åå•ï¼š{}", JSON.toJSON(prizeRandomUserList));

        List<BetUser> prizeWeightUserList = drawControl.doDrawWeight(betUserList, 3);
        logger.info("æƒé‡æŠ½å¥–ï¼Œä¸­å¥–ç”¨æˆ·åå•ï¼š{}", JSON.toJSON(prizeWeightUserList));
    }

}
```

