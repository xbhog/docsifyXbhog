# 设计模式

所有模式根据意图和目的分类：

1. 创建型模式
2. 结构型模式
3. 行为模式

优秀设计的特征：

1. 代码复用性高：减少开发成本时最常用的方式之一

2. 扩展性：**变化**是程序员生命中唯一不变的事情

   需求不断变化的"好的一面"：如果有人要求你对程序进行修改，至少说明还有人关心它。

通用软件设计原则：

1. 封装变化的内容：找到程序中的变化内容并将其与不变的内容区分开，主要目的是将变更造成的影响最小化
2. 方法层面的封装
3. 类层面的封装

# SOLID原则

## 单一职责原则

> 修改一个类的原因只能有一个。

尽量让每个类只负责软件中的一个功能，并将该功能完全封装（你也可称之为隐藏）在该类中；

主要目的：减少复杂度。

错误实现：

```java
public class VideoUserService {

    public void serveGrade(String userType){
        if ("VIP用户".equals(userType)){
            System.out.println("VIP用户，视频1080P蓝光");
        } else if ("普通用户".equals(userType)){
            System.out.println("普通用户，视频720P超清");
        } else if ("访客用户".equals(userType)){
            System.out.println("访客用户，视频480P高清");
        }
    }
}
```

根据上述原则，我们将每个功能做成对应的类并进行封装；

![image-20220608220018785](https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220608220018785.png)

## 开闭原则

> 对于扩展，类应该是“开放”的；对于修改，类则应是“封闭”的。

主要目的：是在实现新功能时能保持已有代码不变；

以求圆面积为例，当标准类中的属性定义不满足我们的需求时，我们需要对类进行扩展，这是我们为了不对源代码的修改，可以通过继承来实现有别于父类的行为；

<img src="https://xbhog-img.oss-cn-hangzhou.aliyuncs.com/2022/image-20220608223541143.png" alt="image-20220608223541143" style="zoom:50%;" />

也比如在一个订单类中有运输方法，当我们需要添加新的运输方式的时候，可以遵循开闭原则，实现子类完成需求；

## 里氏替换原则：

> 当你扩展一个类时， 记住你应该要能在不修改客户端代码的情况下将子类的对象作为父类对象进行传递。

子类必须保持与父类行为的兼容。在重写一个方法时，你要对基类行为进行扩展，而不是将其完全替换;



子类继承父类遵循的原则：

- 两同”即方法名相同、形参列表相同；
- “两小”指的是子类方法返回值类型应比父类方法返回值类型更小或相等，子类方法声明抛出的异常类应比父类方法声明抛出的异常类更小或相等；
- “一大”指的是子类方法的访问权限应比父类方法的访问权限更大或相等。

