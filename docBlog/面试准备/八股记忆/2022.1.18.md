## ArrayList的扩充分析：

首先ArrayList底层是采用数组实现的，扩容的方式分为两种，或者两个方法，无参构造方法和有参构造方法，

无参构造方法，初始化长度为0，只有在添加一个元素的时候，数组容量才会扩充为10；

有参构造方法，初始化数组长度为10；

**ArrayList 每次扩容之后容量都会变为原来的 1.5 倍左右，通过位移和数组复制实现的**

## HashMap扩容分析：

加载因子*默认容量=扩充阈值；

0.75*16 = 12；

当加入12个元素的时候会进行扩容，进行2倍扩充。

JDK1.8

当链表的长度大于阈值(默认值为8)的时候，在链表转为红黑树之前判断数组的大小是否小于64，如果小于，则进行数组的扩容，否则转为红黑树加快查找的效率。

## 什么是快速失败以及安全失败： 

首先快速失败是Java集合中的一种错误检测机制，在使用迭代器遍历集合的时候：

1. 在多线程的情况下，操作非安全的集合类会触发fail-fast机制
2. 如果在单线程下，遍历的时候对集合对象进行修改，也会触发。

错误是 **当前修改异常**

原因是，在hasNext或者next时，会检查变量modCount是否变为expectedModCount值，如果两个的值不相等则会抛出异常。

解决方法：遍历的时候对iterator对象加锁

安全失败在遍历的时候的特点：

1. 先复制原有集合的内容，在复制的集合上进行遍历，在旧集合上的操作不影响遍历的结果。
