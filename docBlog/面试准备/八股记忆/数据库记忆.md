## 什么是数据库、数据库管理系统、数据库系统以及数据库管理员？
1. 数据库是数据的集合;
2. 数据库管理系统是一种操纵和管理数据库的软件;
3. 数据库系统通常有软件、硬件、和数据库管理员组成(DBA);
4. 数据库管理员是负责管理和维护数据库的人员.

## 什么是元组、码、候选码、主键、外键、主属性、非主属性？
1. 元组是关系型数据库中的基本概念，关系是一张表，表中的每行就是一个元组，每个列都是属性;
2. 码：能够唯一标识的实体的属性或者属性集合
3. 候选码：都能够做主码的码，也就是都能唯一标识这个实体。以学生为主体，需要可以标识学生主体，则学号就是候选码，假设(姓名、班级)的属性组合足以区分学生实体，则（姓名、学号）也是候选码。
4. 主键：主键是从候选码中选出的，一个实体只能有一个主键，但是可以有多个候选码。
5. 外键：一个关系中的一个属性是另外一个关系中的主码则这个属性为外码。R(R#,RN,S#) S(S#,SN,SD)中，R的主键是R#，S的主键是S#，则S#是R中的外键。
6. 主属性：在候选码中出现的属性；比如关系 工人（工号，身份证号，姓名，性别，部门）.显然工号和身份证号都能够唯一标示这个关系，所以都是候选码。工号、身份证号这两个属性就是主属性。如果主码是一个属性组，那么属性组中的属性都是主属性。
7. 非主属性：不包含在任何一个候选码中的属性；
## 主键和外键的区别：
主键：不能重复、不能为空、一个表中只能有一个主键
外键：与主键正好相反，可以重复、可以为空、一个表中可以有多个外键

## 范式问题
部分函数依赖：
>（学号，身份证号）->（姓名），（学号）->（姓名），（身份证号）->（姓名）；所以姓名部分函数依赖与（学号，身份证号）；

第一范式-->第二范式的转换(消除了非主属性对码的部分函数依赖)
![](https://images.xiaozhuanlan.com/photo/2019/f6db2cbb2320c280f529a7cff05f59fb.png)
第二范式-->第三范式的转换(消除了非主属性对于码的传递函数依赖)
> （学号，身份证号）->（姓名），（学号）->（姓名），（身份证号）->（姓名）；所以姓名部分函数依赖与（学号，身份证号）.

## 删除问题
drop:删除表的数据和结构
truncate：只删除表的数据
delete: 删除数据，可以指定某一个列的数据

## 数据库设计通常分为哪几部：
1. 需求分析
2. 概念设计：主要采用E-R模型进行设计，包括画E-R图
3. 逻辑设计：通过将E-R图转换成表，实现从E-R模型到关系模型的转换。
4. 物理结构设计：主要是为所设计的数据库选择合适的存储结构和存取路径
5. 数据库实施
6. 数据库的运行和维护

## MyISAM与InnoDB的区别

1. MyISAM只支持表锁，而innoDBb支持行锁和表锁，默认是行锁
2. 前者不支持事务，后者支持事务(提交和回滚)
3. 前者不支持崩溃恢复，后者支持，依赖于redo log(重做日志);
   - InnoDB引擎使用redo log(重做引擎)保证事务的持久性，使用undo log(回滚日志)保证事务的原子性
   - InnoDB使用锁机制和MVCC等手段保持事务的隔离性(默认隔离的级别是：**`REPEATABLE-READ`**)
   - 保证了持久性、原子性、隔离性才能保证数据的一致性
4. 前者不支持外键，后者支持外键，
   - 不建议在数据库层面使用外键，一般在应用层解决，但是这样会造成数据不一致的问题
5. 前者不支持MVCC，后者支持(MVCC是行锁的升级版，减少加锁的操作)

## 表锁和行锁的对比：

表级锁：MySQL中锁定粒度最大的，对当前操作的整张表进行加锁，

优点：

1. 实现简单、消耗较少
2. 加锁快、不会出现死锁

缺点：

1. 锁定粒度最大，触发所冲突概率高
2. 并发度最低

行级锁：MySQL中锁定力度最小的一种锁，只针对当前操作进行加锁。

优点：

1. 行级锁能大大减少数据库操作的冲突
2. 加锁粒度最小，并发最高

缺点：

1. 资源消耗大，加锁慢
2. 会出现死锁

### 锁和锁粒度

> 为什么要加锁？加锁是为了防止不同的线程访问同一共享资源造成混乱。
> 打个比方：人是不同的线程，卫生间是共享资源
> 你在上洗手间的时候肯定要把门锁上吧，这就是加锁，只要你在里面，这个卫生间就被锁了，只有你出来之后别人才能用。想象一下如果卫生间的门没有锁会是什么样？
>
>
> 什么是加锁粒度呢？所谓加锁粒度就是你要锁住的范围是多大。
> 比如你在家上卫生间，你只要锁住卫生间就可以了吧，不需要将整个家都锁起来不让家人进门吧，卫生间就是你的加锁粒度。

参考文章：“[锁&加锁粒度](http://blog.chinaunix.net/uid-20758579-id-1876916.html)”

InnoDB存储引擎中锁的三种算法：

1. Record lock:记录锁，单个行记录上的锁
2. Gap lock:间隙锁，锁定一个范围，不包括记录本身
3. Next-key lock: record+Gap临建锁：锁定一个范围，包含记录本身

## 什么是事务：

**事务是逻辑上的一组操作，要么都执行，要么都不执行**

事务的四大原则：ACID原则

1. 原子性：事务是最小的执行单位，不允许分割。要么操作全部完成，要么全部不完成。
2. 一致性：执行事务的前后，数据保持一致，转账的时候，双发转账的总金额不变。
3. 隔离性：每隔用户操作事务的时候都不被其他事务所干扰，各并发之间都是独立的。
4. 持久性：一个事务被提交后，对数据库的改变都是永久的。

咋回事